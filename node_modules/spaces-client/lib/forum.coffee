Faker = require('faker')
$ = require('jquery')
Resource = require('./resource.js')

class Forum
  @create = (site, parentId, userId) ->
    data = {
      discussion_archive: {
        name: Faker.Lorem.sentences(1),
        description: Faker.Lorem.sentences(4)
      }
    }
    data['discussion_archive']['parent_id'] = parentId if parentId
    Resource.createResource(site, userId, 'discussion_archive', data)

  @updateForum = (site, parentId, userId) ->
    data = {
      discussion_archive: {
        description: Faker.Lorem.sentences(4)
      }
    }
    Resource.editResource(site, userId, 'discussion_archive', data)

  @deleteForum = (site, parentId, userId) ->
    Resource.deleteResource(site, userId, 'discussion_archive')

  @createDiscussion = (site, forumId, userId) ->
    data = {
      discussion: {
        title: Faker.Lorem.sentences(1)
        body: Faker.Lorem.sentences(4)
      }
    }
    data['discussion']['parent_id'] = forumId if forumId
    Resource.createResource(site, userId, 'discussion', data)

  @updateDiscussion = (site, forumId, userId) ->
    data = {
      discussion: {
        body: Faker.Lorem.sentences(4)
      }
    }
    Resource.editResource(site, userId, 'discussion', data)

  @deleteDiscussion = (site, parentId, userId) ->
    Resource.deleteResource(site, userId, 'discussion')

module.exports = exports = Forum