class Ideastorm
  Faker = require('faker')
  Resource = require('./resource')

  @createIdeastorm = (site, sessionId, parentId, userId, onsuccess, onfail, oncreate) ->
    data = {
      ideastorm: {
        name: Faker.Lorem.sentences(1),
        description: Faker.Lorem.sentences(4),
        close_at: new Date().toISOString()
      }
    }
    data['ideastorm']['parent_id'] = parentId if parentId
    Resource.createResource(site, userId, sessionId, 'ideastorm', data, onsuccess, onfail, oncreate)

  @updateIdeastorm = (site, sessionId, resourceId, userId, onsuccess, onfail) ->
    data = {
      ideastorm: {
        description: Faker.Lorem.sentences(4)
      }
    }
    Resource.editResource(site, userId, sessionId, 'ideastorm', resourceId, data, onsuccess, onfail)

  @deleteIdeastorm = (site, sessionId, resourceId, userId, onsuccess, onfail, ondestroy) ->
    Resource.deleteResource(site, userId, sessionId, resourceId, 'ideastorm', onsuccess, onfail, ondestroy)

  @createIdea = (site, sessionId, ideastormId, userId, onsuccess, onfail, oncreate) ->
    data = {
      idea: {
        title: Faker.Lorem.sentences(1)
        body: Faker.Lorem.sentences(4)
        parent_id: ideastormId
      }
    }
    Resource.createResource(site, userId, sessionId, 'idea', data, onsuccess, onfail, oncreate)

  @updateIdea = (site, sessionId, resourceId, userId, onsuccess, onfail) ->
    data = {
      idea: {
        body: Faker.Lorem.sentences(4)
      }
    }
    Resource.editResource(site, userId, sessionId, 'idea', resourceId, data, onsuccess, onfail)

  @deleteIdea = (site, sessionId, resourceId, userId, onsuccess, onfail, ondestroy) ->
    Resource.deleteResource(site, userId, sessionId, resourceId, 'idea', onsuccess, onfail, ondestroy)

module.exports = exports = Ideastorm