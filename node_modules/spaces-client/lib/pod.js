// Generated by CoffeeScript 1.6.3
(function() {
  var Pod, exports;

  Pod = (function() {
    var $;

    function Pod() {}

    $ = require('jquery');

    Pod.getServers = function(site, onsuccess) {
      var Spaces, headers;
      Spaces = require('./spaces-client');
      headers = {
        "Accept": "application/vnd.moxiesoft.mothership-v1+json",
        "API-KEY": Spaces.apiKey
      };
      return Spaces.Resource.getResource({
        full_url: Spaces.mothershipUrl
      }, "system", null, 'api/pods', headers, (function(msecs, pods) {
        var pod;
        pod = $.grep(JSON.parse(pods), (function(pod, n) {
          return pod.id === site.pod_id;
        }))[0];
        return onsuccess(pod.app_servers.length, pod.job_servers.length);
      }), (function(e) {
        return Spaces.logger.info("POD: ERROR: %s", e);
      }));
    };

    return Pod;

  })();

  module.exports = exports = Pod;

}).call(this);
