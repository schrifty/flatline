// Generated by CoffeeScript 1.6.3
(function() {
  var Session, exports;

  Session = (function() {
    function Session() {}

    Session.sessions = {};

    Session.adminId = "";

    Session.setAdminId = function(userId) {
      return this.adminId = userId;
    };

    Session.setSessionId = function(userId, id) {
      if (!this.sessions[userId]) {
        this.sessions[userId] = {};
      }
      return this.sessions[userId]["id"] = id;
    };

    Session.getSessionId = function(userId) {
      var session, sessionId;
      if (session = this.sessions[userId]) {
        if (sessionId = session["id"]) {
          return sessionId;
        } else {
          return console.log("Couldn't find ID within session for user [" + userId + "]");
        }
      } else {
        return console.log("Couldn't find session for user [" + userId + "]");
      }
    };

    Session.getRandomUserItemIdOfType = function(userId, type) {
      var list;
      if (this.sessions[userId]) {
        if (list = this.sessions[userId][type]) {
          return list[Math.floor(Math.random() * list.length)];
        } else {
          return console.log("That user has NO " + type + "s");
        }
      } else {
        return console.log("ERROR: user session not found");
      }
    };

    Session.getRandomSiteItemIdOfType = function(siteId, type) {
      var list;
      if (this.sessions[siteId]) {
        if (list = this.sessions[siteId][type]) {
          return list[Math.floor(Math.random() * list.length)];
        } else {
          return console.log("That site are NO " + type + "s");
        }
      }
    };

    Session.addItem = function(site, userId, type, item) {
      console.log("[" + site.site_id + "][" + userId + "]: Added " + type + " [" + item + "]");
      if (this.sessions[userId]) {
        if (!this.sessions[userId][type]) {
          this.sessions[userId][type] = [];
        }
        this.sessions[userId][type].push(item);
      } else {
        console.log("[" + site.site_id + "][" + userId + "]: ERROR: user session not found");
      }
      if (!this.sessions[site.id]) {
        this.sessions[site.id] = {};
      }
      if (!this.sessions[site.id][type]) {
        this.sessions[site.id][type] = [];
      }
      return this.sessions[site.id][type].push(item);
    };

    return Session;

  })();

  module.exports = exports = Session;

}).call(this);
