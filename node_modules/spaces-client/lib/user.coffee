$ = require("jquery")

class UserAPI

  @create = (data, host, onsuccess, onfail) ->
    Spaces = require('./spaces-client.js')
    $.ajax host + '/users.json',
      type: 'POST',
      dataType: 'json',
      data: JSON.stringify(data),
      beforeSend: (request) ->
        request.setRequestHeader("Accept", "application/vnd.moxiesoft.spaces-v1+json")
        request.setRequestHeader("Content-Type", "application/json")
      error: (jqXHR, textStatus, errorThrown) ->
        Spaces.logger.error("[%s][No user] User.create failed: %s - %s - %j", host, textStatus, errorThrown, jqXHR)
        onfail(errorThrown)
      success: (data) ->
        onsuccess(data)

module.exports = exports = UserAPI