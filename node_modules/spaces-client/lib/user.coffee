class UserAPI

  @create = (data, host, onsuccess, onfail) ->
    $ = require("jquery")
    $.ajax host + '/users.json',
      type: 'POST',
      dataType: 'json',
      data: JSON.stringify(data),
      beforeSend: (request) ->
        request.setRequestHeader("Accept", "application/vnd.moxiesoft.mothership-v1+json")
        request.setRequestHeader("Content-Type", "application/json")
      error: (jqXHR, textStatus, errorThrown) ->
        console.log "Error creating user: " + textStatus + " - " + errorThrown + " - " + JSON.stringify(jqXHR)
        onfail(errorThrown)
      success: (data) ->
        console.log "User Created: " + JSON.stringify(data)
        onsuccess(data)

module.exports = exports = UserAPI