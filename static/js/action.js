// Generated by CoffeeScript 1.6.3
(function() {
  var ACTION_METADATA, Action, action, actions, exports, i, _i, _j, _len, _ref;

  ACTION_METADATA = [[1, 'Blog', 'create'], [3, 'Blog', 'createPost', 'blog']];

  actions = [];

  for (_i = 0, _len = ACTION_METADATA.length; _i < _len; _i++) {
    action = ACTION_METADATA[_i];
    for (i = _j = 0, _ref = action[0] - 1; _j <= _ref; i = _j += 1) {
      if (action.length < 4) {
        action[3] = null;
      }
      actions.push([action[1], action[2], action[3]]);
    }
  }

  Action = (function() {
    var Spaces;

    function Action() {}

    Spaces = require('spaces-client');

    Action.doSomething = function(sites, host, user) {
      var f, klass, parent, site, skip, userId;
      action = actions[Math.floor(Math.random() * actions.length)];
      site = sites[Math.floor(Math.random() * sites.length)];
      if (!site.users) {
        site.users = [];
      }
      userId = site.users[Math.floor(Math.random() * site.users.length)];
      skip = false;
      parent = null;
      if (action[2]) {
        if (!(parent = Spaces.Session.getRandomItemIdOfType(userId, action[2]))) {
          skip = true;
        }
      }
      if (!skip) {
        if (klass = Spaces[action[0]]) {
          if (f = klass[action[1]]) {
            return f.apply(klass, [site.full_url, parent, userId]);
          } else {
            return console.log("ERROR: Couldn't find Spaces." + action[0] + "." + action[1] + "()");
          }
        } else {
          return console.log("ERROR: Couldn't find Spaces." + action[0]);
        }
      }
    };

    return Action;

  })();

  module.exports = exports = Action;

}).call(this);
